"use strict";(self.webpackChunkreact_a11y_tools_docs=self.webpackChunkreact_a11y_tools_docs||[]).push([[220],{1478:function(e,n,t){t.d(n,{b:function(){return x},j:function(){return T}});var a=t(7378),o=t(169),l="focusManager__button_2aGq",r="focusManager__popover_2_aJ",s="focusManager__container_pFOm",i="focusManager__body_2Zrj",c="focusManager__header_gyqP",u="focusManager__header__title_2wWT",m="focusManager__header__button_1vK5",d="focusManager__navigation_3WEL",p="focusManager__navigation__list_1r8m",h="focusManager__link_nFMd",f="focusManager__footer_3gEt",k="focusManager__footer__wrapper_1WwV",g="focusManager__footer__input_1Mfg",b="focusManager__footer__icon_rupH",v="rover__page_38Fb",_="rover__button_2drR",E="rover__sidenav_3Pm2",N="rover__sidenav__label_2LTu",y="rover__sidenav__list_32qq",C="rover__sidenav__link_Z5EL",M="rover__sidenav__counter_1mI9",w="rover__sidenav__left_25NY",F="rover__sidenav__icon_3tXx",S="rover__sidenav__link-text_3ZT3",x=function(e){var n=(0,a.useState)(!1),t=n[0],v=n[1];return a.createElement("div",null,a.createElement("button",{className:l,type:"button",onClick:function(){return v(!0)}},"Show Menu"),t&&a.createElement(o.IK,e,a.createElement("div",{className:r,id:"popover",tabIndex:-1},a.createElement("div",{className:s,role:"dialog","aria-labelledby":"popover-title"},a.createElement("div",{className:i},a.createElement("header",{className:c},a.createElement("h4",{className:u,id:"popover-title"},"Menu"),a.createElement("button",{type:"button",className:m,onClick:function(){return v(!1)}},"Close")),a.createElement("nav",{className:d,"aria-label":"Main"},a.createElement("ul",{className:p},a.createElement("li",null,a.createElement("a",{className:h,href:"#0"},a.createElement("span",null,"Home"),a.createElement("span",null,"35"))),a.createElement("li",null,a.createElement("a",{className:h,href:"#0"},a.createElement("span",null,"Trending"),a.createElement("span",null,"17"))),a.createElement("li",null,a.createElement("a",{className:h,href:"#0"},a.createElement("span",null,"Subscriptions"),a.createElement("span",null,"12"))),a.createElement("li",null,a.createElement("a",{className:h,href:"#0"},a.createElement("span",null,"Library"),a.createElement("span",null,"24"))),a.createElement("li",null,a.createElement("a",{className:h,href:"#0"},a.createElement("span",null,"History"),a.createElement("span",null,"18"))))),a.createElement("footer",{className:f},a.createElement("div",{className:k},a.createElement("input",{className:g,type:"search",placeholder:"Search...","aria-label":"Search"}),a.createElement("button",{className:b},a.createElement("svg",{className:"icon",viewBox:"0 0 24 24"},a.createElement("g",{fill:"none",stroke:"currentColor",strokeLinecap:"square",strokeLinejoin:"miter",strokeMiterlimit:"10",strokeWidth:"2"},a.createElement("path",{d:"M22 22L15.656 15.656"}),a.createElement("circle",{cx:"10",cy:"10",r:"8"})))))))))))},O=t(348),L=t(1301),B=function(e){var n=e.disabled,t=e.children,o=e.onClick,l=(0,a.useRef)(null),r=(0,L.sZ)(l,n),s=r[0],i=r[1],c=r[2],u=r[3];return(0,L.KK)(l,i),a.createElement("button",{className:C,ref:l,onKeyDown:c,onClick:function(){u(),(0,O._N)(o)},tabIndex:s,disabled:n},t)},T=function(){return a.createElement("div",{className:v},a.createElement("button",{className:_,type:"button"},"A Button"),a.createElement(L.pf,{direction:"vertical"},a.createElement("nav",{className:E,id:"sidenav","data-testid":"fdz-js-roving-tabindex-sidenav"},a.createElement("span",{className:N},"Menu"),a.createElement("ul",{className:y},a.createElement("li",null,a.createElement(B,{disabled:!1,onClick:function(){return console.log("Button One clicked")}},a.createElement("div",{className:w},a.createElement("svg",{className:F,viewBox:"0 0 16 16","aria-hidden":"true"},a.createElement("g",{fill:"none",strokeWidth:"1",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"},a.createElement("polyline",{points:"10.5,3.5 10.5,9.5 8,7.5 5.5,9.5 5.5,3.5"}),a.createElement("rect",{x:"0.5",y:"0.5",width:"15",height:"3"}),a.createElement("polyline",{points:"14.5,5.5 14.5,14.5 1.5,14.5 1.5,5.5"}))),a.createElement("span",{className:S},"Orders")),a.createElement("span",{className:M},"10"))),a.createElement("li",null,a.createElement(B,{disabled:!1,onClick:function(){return console.log("Button Two clicked")}},a.createElement("div",{className:w},a.createElement("svg",{className:F,viewBox:"0 0 16 16","aria-hidden":"true"},a.createElement("path",{fill:"none",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",d:"M14.328,2.672 c-1.562-1.562-4.095-1.562-5.657,0C8.391,2.952,8.18,3.27,8,3.601c-0.18-0.331-0.391-0.65-0.672-0.93 c-1.562-1.562-4.095-1.562-5.657,0c-1.562,1.562-1.562,4.095,0,5.657L8,14.5l6.328-6.172C15.891,6.766,15.891,4.234,14.328,2.672z"})),a.createElement("span",{className:S},"Wishlist")),a.createElement("span",{className:M},"12"))),a.createElement("li",null,a.createElement(B,{disabled:!1,onClick:function(){return console.log("Button Three clicked")}},a.createElement("div",{className:w},a.createElement("svg",{className:F,viewBox:"0 0 16 16","aria-hidden":"true"},a.createElement("g",{fill:"none",strokeWidth:"1",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"},a.createElement("polyline",{points:" 15.5,7.5 8,0.5 0.5,7.5"}),a.createElement("polyline",{points:"2.5,8.5 2.5,15.5 6.5,15.5 6.5,11.5 9.5,11.5 9.5,15.5 13.5,15.5 13.5,8.5"}))),a.createElement("span",{className:S},"Addresses")))),a.createElement("li",null,a.createElement(B,{disabled:!1,onClick:function(){return console.log("Button Four clicked")}},a.createElement("div",{className:w},a.createElement("svg",{className:F,viewBox:"0 0 16 16","aria-hidden":"true"},a.createElement("g",{fill:"none",strokeWidth:"1",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"},a.createElement("line",{x1:"0.5",y1:"4.5",x2:"15.5",y2:"4.5"}),a.createElement("path",{d:"M5.5,12.5h-4 c-0.552,0-1-0.448-1-1v-10c0-0.552,0.448-1,1-1h13c0.552,0,1,0.448,1,1v5"}),a.createElement("polygon",{points:"11,15 8.5,15.5 9,13 13.5,8.5 15.5,10.5 "}))),a.createElement("span",{className:S},"Payment Methods"))))),a.createElement("span",{className:N},"Other"),a.createElement("ul",{className:y},a.createElement("li",null,a.createElement(B,{disabled:!1,onClick:function(){return console.log("Button Five clicked")}},a.createElement("div",{className:w},a.createElement("svg",{className:F,viewBox:"0 0 16 16","aria-hidden":"true"},a.createElement("g",{fill:"none",strokeWidth:"1",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"},a.createElement("path",{d:"M4.318,9A5,5,0,0,0,1.5,13.5h0s2,2,6.5,2,6.5-2,6.5-2h0A5,5,0,0,0,11.681,9"}),a.createElement("path",{d:"M11.5,4c0,1.933-1.567,4.5-3.5,4.5S4.5,5.933,4.5,4a3.5,3.5,0,0,1,7,0Z"}))),a.createElement("span",{className:S},"Profile Settings")))),a.createElement("li",null,a.createElement(B,{disabled:!1,onClick:function(){return console.log("Button Six clicked")}},a.createElement("div",{className:w},a.createElement("svg",{className:F,viewBox:"0 0 16 16","aria-hidden":"true"},a.createElement("g",{fill:"none",strokeWidth:"1",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"},a.createElement("path",{d:"M6.5,5.5v-3 c0-0.552,0.448-1,1-1h7c0.552,0,1,0.448,1,1v12c0,0.552-0.448,1-1,1h-7c-0.552,0-1-0.448-1-1v-3"}),a.createElement("line",{x1:"11.5",y1:"8.5",x2:"0.5",y2:"8.5"}),a.createElement("polyline",{points:"3.5,5.5 0.5,8.5 3.5,11.5"}))),a.createElement("span",{className:S},"Log Out"))))))),a.createElement("button",{className:_,type:"button"},"Another Button"))}},3519:function(e,n,t){t.r(n),t.d(n,{frontMatter:function(){return c},contentTitle:function(){return u},metadata:function(){return m},toc:function(){return d},default:function(){return h}});var a=t(7462),o=t(3366),l=(t(7378),t(3905)),r=t(1478),s=t(9951),i=["components"],c={sidebar_position:1,title:"Focus Manager"},u=void 0,m={unversionedId:"manage-focus/focus-manager",id:"manage-focus/focus-manager",isDocsHomePage:!1,title:"Focus Manager",description:"The Focus Manager handles the focus for its descendants. It allows focusing inside the scope of a",source:"@site/docs/manage-focus/focus-manager.mdx",sourceDirName:"manage-focus",slug:"/manage-focus/focus-manager",permalink:"/react-a11y-tools/docs/manage-focus/focus-manager",editUrl:"https://github.com/feedzai/react-a11y-tools/docs/manage-focus/focus-manager.mdx",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1,title:"Focus Manager"},sidebar:"tutorialSidebar",previous:{title:"Route Announcer",permalink:"/react-a11y-tools/docs/feedback/route-announcer"},next:{title:"The Rover",permalink:"/react-a11y-tools/docs/manage-focus/the-rover"}},d=[{value:"Development Instructions",id:"development-instructions",children:[{value:"1. Wrap the content with the <code>Focus Manager</code>",id:"1-wrap-the-content-with-the-focus-manager",children:[],level:4},{value:"2. Handle its mounting/unmounting on the DOM",id:"2-handle-its-mountingunmounting-on-the-dom",children:[],level:4},{value:"3. Add special features mapped to keys (Optional)",id:"3-add-special-features-mapped-to-keys-optional",children:[],level:4}],level:3},{value:"Props",id:"props",children:[],level:3}],p={toc:d};function h(e){var n=e.components,t=(0,o.Z)(e,i);return(0,l.kt)("wrapper",(0,a.Z)({},p,t,{components:n,mdxType:"MDXLayout"}),(0,l.kt)(s.QE,{mdxType:"Subtitle"},'The Focus Manager handles the focus for its descendants. It allows focusing inside the scope of a group of HTML elements and restoring the focus back to the previously focused element. Besides this, there\'s also the possibility to auto-focus on the first "tabbable" element inside the scope.'),(0,l.kt)(s.Uc,{mdxType:"BrowserWindow"},(0,l.kt)(r.b,{contain:!0,autoFocus:!0,restoreFocus:!0,mdxType:"DemoFocusManager"})),(0,l.kt)("br",null),(0,l.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"How to")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("ul",{parentName:"div"},(0,l.kt)("li",{parentName:"ul"},"Press ",(0,l.kt)("inlineCode",{parentName:"li"},"tab"),' to focus on the "Show Menu" button.'),(0,l.kt)("li",{parentName:"ul"},"Press ",(0,l.kt)("inlineCode",{parentName:"li"},"enter")," to open the menu."),(0,l.kt)("li",{parentName:"ul"},'Focus will be set on the "Close" button'),(0,l.kt)("li",{parentName:"ul"},"Press ",(0,l.kt)("inlineCode",{parentName:"li"},"tab")," or ",(0,l.kt)("inlineCode",{parentName:"li"},"shift+tab")," to go through each focusable element on the menu."),(0,l.kt)("li",{parentName:"ul"},"Press ",(0,l.kt)("inlineCode",{parentName:"li"},"enter"),' on the "Close" button to exit the menu.'),(0,l.kt)("li",{parentName:"ul"},'Focus will be set on the "Show Menu" button again.')))),(0,l.kt)("h3",{id:"development-instructions"},"Development Instructions"),(0,l.kt)("p",null,"When you need to re-open the containment, the ",(0,l.kt)("inlineCode",{parentName:"p"},"restoreFocus")," can help you out when you need to reset the focus back to the previous element, like the button where you clicked to open a menu, for instance."),(0,l.kt)("p",null,"The component works primarily with the ",(0,l.kt)("inlineCode",{parentName:"p"},"tab")," key so that you can go back and forth between elements that can receive focus. However, for cases where you need to move focus within the scope programmatically (e.g. with the arrow or the ",(0,l.kt)("inlineCode",{parentName:"p"},"home")," or the ",(0,l.kt)("inlineCode",{parentName:"p"},"end")," keys), the ",(0,l.kt)("inlineCode",{parentName:"p"},"useFocusManager")," hook can be used to handle keyboard events and using a focus manager to move focus to the next and previous elements."),(0,l.kt)("h4",{id:"1-wrap-the-content-with-the-focus-manager"},"1. Wrap the content with the ",(0,l.kt)("inlineCode",{parentName:"h4"},"Focus Manager")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-jsx"},'<FocusScope contain restoreFocus autoFocus>\n    <button type="button">Close</button>\n    <form>\n        <label htmlFor="first-name">First Name</label>\n        <input id="first-name" type="text" name="textfield" />\n        <label htmlFor="last-name" className="required-field">\n            Last Name\n        </label>\n        <input\n            id="last-name"\n            type="text"\n            name="textfield"\n            aria-describedby="required-message"\n            required\n        />\n        <input type="submit" defaultValue="Submit" />\n    </form>\n</FocusScope>\n')),(0,l.kt)("h4",{id:"2-handle-its-mountingunmounting-on-the-dom"},"2. Handle its mounting/unmounting on the DOM"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-jsx"},'function SideMenu() {\n    const [isOpen, setOpen] = useState(false);\n\n    /**\n     * @param {"open" | "close"} status\n     */\n    function handleOpenStatus(status) {\n        switch (status) {\n            case "open":\n                setOpen(true);\n                break;\n\n            case "close":\n            default:\n                setOpen(false);\n                break;\n        }\n    }\n\n    function handleOnClick() {\n        handleOpenStatus("open");\n    }\n\n    function handleOnSubmit() {\n        handleOpenStatus("close");\n    }\n\n    function handleOnClickToClose() {\n        handleOpenStatus("close");\n    }\n\n    function renderMenu() {\n        if (isOpen) {\n            return (\n                <FocusScope contain restoreFocus autoFocus>\n                    <button onClick={() => setOpen(false)}>Close</button>\n                    <form onSubmit={handleOnSubmit}>\n                        <label htmlFor="first-name">First Name</label>\n                        <input id="first-name" type="text" name="textfield" />\n                        <label htmlFor="last-name" className="required-field">\n                            Last Name\n                        </label>\n                        <input\n                            id="last-name"\n                            type="text"\n                            name="textfield"\n                            aria-describedby="required-message"\n                            required\n                        />\n                        <button type="button">Submit</button>\n                    </form>\n                </FocusScope>\n            );\n        }\n    }\n    return (\n        <>\n            <button onClick={handleOnClick}>Open the menu</button>\n            {renderMenu()}\n        </>\n    );\n}\n')),(0,l.kt)("p",null,"Let's recap:"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},'Clicking the "Open the menu" button below causes the state of ',(0,l.kt)("inlineCode",{parentName:"li"},"isOpen")," to change from ",(0,l.kt)("inlineCode",{parentName:"li"},"false")," to ",(0,l.kt)("inlineCode",{parentName:"li"},"true"),"."),(0,l.kt)("li",{parentName:"ol"},"This, in turn, mounts the ",(0,l.kt)("inlineCode",{parentName:"li"},"FocusManager"),"."),(0,l.kt)("li",{parentName:"ol"},"Since the ",(0,l.kt)("inlineCode",{parentName:"li"},"autoFocus")," prop is set to ",(0,l.kt)("inlineCode",{parentName:"li"},"true"),', the focus will be automatically placed on the first element that can receive focus, which is the "Close" button.'),(0,l.kt)("li",{parentName:"ol"},'Clicking the "Close" button unmounts the focus scope, which restores focus back to the button.')),(0,l.kt)("h4",{id:"3-add-special-features-mapped-to-keys-optional"},"3. Add special features mapped to keys (Optional)"),(0,l.kt)("p",null,"If you want to add special navigation features, use the ",(0,l.kt)("inlineCode",{parentName:"p"},"useFocusManager")," to programmatically move focus within a ",(0,l.kt)("inlineCode",{parentName:"p"},"FocusManager"),"."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-jsx"},'function SideMenuButton({ children, onClick }) {\n  const { focusLast, focusFirst } = useFocusManager();\n\n  const onKeyDown = (event) => {\n    switch (event.key) {\n      case \'Home\':\n        focusFirst();\n        break;\n      case \'End\':\n        focusLast();\n        break;\n\n        default:\n            break;\n    }\n\n    return <button type="button" onClick={onClick} onKeyDown={onKeyDown}>{children}</button>;\n  };\n}\n\nfunction SideMenu() {\n    const [isOpen, setOpen] = useState(false);\n\n    {...}\n\n    function handleOnSubmit() {\n        handleOpenStatus("close");\n    }\n\n    function handleOnClickToClose() {\n        handleOpenStatus("close");\n    }\n\n    function renderMenu() {\n        if (isOpen) {\n            return (\n                <FocusScope contain restoreFocus autoFocus>\n                    <SideMenuButton onClick={handleOnClickToClose}>Close</SideMenuButton>\n                    <form onSubmit={handleOnSubmit}>\n                        {...}\n                        <SideMenuButton>Submit</SideMenuButton>\n                    </form>\n                </FocusScope>\n            );\n        }\n    }\n    return (\n        <>\n            <button onClick={handleOnClick}>Open the menu</button>\n            {renderMenu()}\n        </>\n    );\n}\n')),(0,l.kt)("h3",{id:"props"},"Props"),(0,l.kt)(s._A,{name:"FocusManager",mdxType:"PropsTable"}))}h.isMDXComponent=!0}}]);