"use strict";(globalThis.webpackChunkreact_a11y_tools_docs=globalThis.webpackChunkreact_a11y_tools_docs||[]).push([[871],{3701:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>c,default:()=>x,frontMatter:()=>r,metadata:()=>l,toc:()=>u});var s=n(2540),o=n(8453),i=n(1974),a=n(2594);const r={sidebar_position:1,title:"Focus Manager"},c=void 0,l={id:"manage-focus/focus-manager",title:"Focus Manager",description:"The Focus Manager handles the focus for its descendants. It allows focusing inside the scope of a",source:"@site/docs/manage-focus/focus-manager.mdx",sourceDirName:"manage-focus",slug:"/manage-focus/focus-manager",permalink:"/react-a11y-tools/docs/manage-focus/focus-manager",draft:!1,unlisted:!1,editUrl:"https://github.com/feedzai/react-a11y-tools/docs/manage-focus/focus-manager.mdx",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1,title:"Focus Manager"},sidebar:"tutorialSidebar",previous:{title:"Route Announcer",permalink:"/react-a11y-tools/docs/feedback/route-announcer"},next:{title:"The Rover",permalink:"/react-a11y-tools/docs/manage-focus/the-rover"}},d={},u=[{value:"Development Instructions",id:"development-instructions",level:3},{value:"1. Wrap the content with the <code>Focus Manager</code>",id:"1-wrap-the-content-with-the-focus-manager",level:4},{value:"2. Handle its mounting/unmounting on the DOM",id:"2-handle-its-mountingunmounting-on-the-dom",level:4},{value:"3. Add special features mapped to keys (Optional)",id:"3-add-special-features-mapped-to-keys-optional",level:4},{value:"Props",id:"props",level:3}];function h(e){const t={admonition:"admonition",code:"code",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.Pd,{children:(0,s.jsx)(t.p,{children:'The Focus Manager handles the focus for its descendants. It allows focusing inside the scope of a\ngroup of HTML elements and restoring the focus back to the previously focused element. Besides\nthis, there\'s also the possibility to auto-focus on the first "tabbable" element inside the scope.'})}),"\n",(0,s.jsx)(a.Zx,{children:(0,s.jsx)(i.d,{contain:!0,autoFocus:!0,restoreFocus:!0})}),"\n",(0,s.jsx)("br",{}),"\n",(0,s.jsx)(t.admonition,{title:"How to",type:"note",children:(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["Press ",(0,s.jsx)(t.code,{children:"tab"}),' to focus on the "Show Menu" button.']}),"\n",(0,s.jsxs)(t.li,{children:["Press ",(0,s.jsx)(t.code,{children:"enter"})," to open the menu."]}),"\n",(0,s.jsx)(t.li,{children:'Focus will be set on the "Close" button'}),"\n",(0,s.jsxs)(t.li,{children:["Press ",(0,s.jsx)(t.code,{children:"tab"})," or ",(0,s.jsx)(t.code,{children:"shift+tab"})," to go through each focusable element on the menu."]}),"\n",(0,s.jsxs)(t.li,{children:["Press ",(0,s.jsx)(t.code,{children:"enter"}),' on the "Close" button to exit the menu.']}),"\n",(0,s.jsx)(t.li,{children:'Focus will be set on the "Show Menu" button again.'}),"\n"]})}),"\n",(0,s.jsx)(t.h3,{id:"development-instructions",children:"Development Instructions"}),"\n",(0,s.jsxs)(t.p,{children:["When you need to re-open the containment, the ",(0,s.jsx)(t.code,{children:"restoreFocus"})," can help you out when you need to reset the focus back to the previous element, like the button where you clicked to open a menu, for instance."]}),"\n",(0,s.jsxs)(t.p,{children:["The component works primarily with the ",(0,s.jsx)(t.code,{children:"tab"})," key so that you can go back and forth between elements that can receive focus. However, for cases where you need to move focus within the scope programmatically (e.g. with the arrow or the ",(0,s.jsx)(t.code,{children:"home"})," or the ",(0,s.jsx)(t.code,{children:"end"})," keys), the ",(0,s.jsx)(t.code,{children:"useFocusManager"})," hook can be used to handle keyboard events and using a focus manager to move focus to the next and previous elements."]}),"\n",(0,s.jsxs)(t.h4,{id:"1-wrap-the-content-with-the-focus-manager",children:["1. Wrap the content with the ",(0,s.jsx)(t.code,{children:"Focus Manager"})]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-jsx",children:'<FocusScope contain restoreFocus autoFocus>\n\t<button type="button">Close</button>\n\t<form>\n\t\t<label htmlFor="first-name">First Name</label>\n\t\t<input id="first-name" type="text" name="textfield" />\n\t\t<label htmlFor="last-name" className="required-field">\n\t\t\tLast Name\n\t\t</label>\n\t\t<input\n\t\t\tid="last-name"\n\t\t\ttype="text"\n\t\t\tname="textfield"\n\t\t\taria-describedby="required-message"\n\t\t\trequired\n\t\t/>\n\t\t<input type="submit" defaultValue="Submit" />\n\t</form>\n</FocusScope>\n'})}),"\n",(0,s.jsx)(t.h4,{id:"2-handle-its-mountingunmounting-on-the-dom",children:"2. Handle its mounting/unmounting on the DOM"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-jsx",children:'function SideMenu() {\n\tconst [isOpen, setOpen] = useState(false);\n\n\t/**\n\t * @param {"open" | "close"} status\n\t */\n\tfunction handleOpenStatus(status) {\n\t\tswitch (status) {\n\t\t\tcase "open":\n\t\t\t\tsetOpen(true);\n\t\t\t\tbreak;\n\n\t\t\tcase "close":\n\t\t\tdefault:\n\t\t\t\tsetOpen(false);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tfunction handleOnClick() {\n\t\thandleOpenStatus("open");\n\t}\n\n\tfunction handleOnSubmit() {\n\t\thandleOpenStatus("close");\n\t}\n\n\tfunction handleOnClickToClose() {\n\t\thandleOpenStatus("close");\n\t}\n\n\tfunction renderMenu() {\n\t\tif (isOpen) {\n\t\t\treturn (\n\t\t\t\t<FocusScope contain restoreFocus autoFocus>\n\t\t\t\t\t<button onClick={() => setOpen(false)}>Close</button>\n\t\t\t\t\t<form onSubmit={handleOnSubmit}>\n\t\t\t\t\t\t<label htmlFor="first-name">First Name</label>\n\t\t\t\t\t\t<input id="first-name" type="text" name="textfield" />\n\t\t\t\t\t\t<label htmlFor="last-name" className="required-field">\n\t\t\t\t\t\t\tLast Name\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tid="last-name"\n\t\t\t\t\t\t\ttype="text"\n\t\t\t\t\t\t\tname="textfield"\n\t\t\t\t\t\t\taria-describedby="required-message"\n\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<button type="button">Submit</button>\n\t\t\t\t\t</form>\n\t\t\t\t</FocusScope>\n\t\t\t);\n\t\t}\n\t}\n\treturn (\n\t\t<>\n\t\t\t<button onClick={handleOnClick}>Open the menu</button>\n\t\t\t{renderMenu()}\n\t\t</>\n\t);\n}\n'})}),"\n",(0,s.jsx)(t.p,{children:"Let's recap:"}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsxs)(t.li,{children:['Clicking the "Open the menu" button below causes the state of ',(0,s.jsx)(t.code,{children:"isOpen"})," to change from ",(0,s.jsx)(t.code,{children:"false"})," to ",(0,s.jsx)(t.code,{children:"true"}),"."]}),"\n",(0,s.jsxs)(t.li,{children:["This, in turn, mounts the ",(0,s.jsx)(t.code,{children:"FocusManager"}),"."]}),"\n",(0,s.jsxs)(t.li,{children:["Since the ",(0,s.jsx)(t.code,{children:"autoFocus"})," prop is set to ",(0,s.jsx)(t.code,{children:"true"}),', the focus will be automatically placed on the first element that can receive focus, which is the "Close" button.']}),"\n",(0,s.jsx)(t.li,{children:'Clicking the "Close" button unmounts the focus scope, which restores focus back to the button.'}),"\n"]}),"\n",(0,s.jsx)(t.h4,{id:"3-add-special-features-mapped-to-keys-optional",children:"3. Add special features mapped to keys (Optional)"}),"\n",(0,s.jsxs)(t.p,{children:["If you want to add special navigation features, use the ",(0,s.jsx)(t.code,{children:"useFocusManager"})," to programmatically move focus within a ",(0,s.jsx)(t.code,{children:"FocusManager"}),"."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-jsx",children:'function SideMenuButton({ children, onClick }) {\n  const { focusLast, focusFirst } = useFocusManager();\n\n  const onKeyDown = (event) => {\n    switch (event.key) {\n      case \'Home\':\n        focusFirst();\n        break;\n      case \'End\':\n        focusLast();\n        break;\n\n\t\tdefault:\n\t\t\tbreak;\n    }\n\n\treturn <button type="button" onClick={onClick} onKeyDown={onKeyDown}>{children}</button>;\n  };\n}\n\nfunction SideMenu() {\n\tconst [isOpen, setOpen] = useState(false);\n\n\t{...}\n\n\tfunction handleOnSubmit() {\n\t\thandleOpenStatus("close");\n\t}\n\n\tfunction handleOnClickToClose() {\n\t\thandleOpenStatus("close");\n\t}\n\n\tfunction renderMenu() {\n\t\tif (isOpen) {\n\t\t\treturn (\n\t\t\t\t<FocusScope contain restoreFocus autoFocus>\n\t\t\t\t\t<SideMenuButton onClick={handleOnClickToClose}>Close</SideMenuButton>\n\t\t\t\t\t<form onSubmit={handleOnSubmit}>\n\t\t\t\t\t\t{...}\n\t\t\t\t\t\t<SideMenuButton>Submit</SideMenuButton>\n\t\t\t\t\t</form>\n\t\t\t\t</FocusScope>\n\t\t\t);\n\t\t}\n\t}\n\treturn (\n\t\t<>\n\t\t\t<button onClick={handleOnClick}>Open the menu</button>\n\t\t\t{renderMenu()}\n\t\t</>\n\t);\n}\n'})}),"\n",(0,s.jsx)(t.h3,{id:"props",children:"Props"}),"\n",(0,s.jsx)(a.Xy,{name:"FocusManager"})]})}function x(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},1974:(e,t,n)=>{n.d(t,{d:()=>O,S:()=>W});var s=n(3696),o=n(9269);const i="focusManager__button_sCuP",a="focusManager__popover_LyIi",r="focusManager__container_tILP",c="focusManager__body_Uhgc",l="focusManager__header_oHc9",d="focusManager__header__title_l96z",u="focusManager__header__button_Wzqi",h="focusManager__navigation_muPr",x="focusManager__navigation__list_M2as",p="focusManager__link_BtV0",m="focusManager__footer_VHH7",j="focusManager__footer__wrapper_QZHK",f="focusManager__footer__input_x7QE",b="focusManager__footer__icon_sVWq",_="rover__page_E_vN",g="rover__button_QpQw",v="rover__sidenav_vwZb",k="rover__sidenav__label_uKMM",y="rover__sidenav__list_woQ8",M="rover__sidenav__link_C8Um",N="rover__sidenav__counter_WF_Q",w="rover__sidenav__left__NOW",C="rover__sidenav__icon_w4di",F="rover__sidenav__link-text_rTsX";var S=n(2540);const O=e=>{const[t,n]=(0,s.useState)(!1);return(0,S.jsxs)("div",{children:[(0,S.jsx)("button",{className:i,type:"button",onClick:()=>n(!0),children:"Show Menu"}),t&&(0,S.jsx)(o.c_,{...e,children:(0,S.jsx)("div",{className:a,id:"popover",tabIndex:-1,children:(0,S.jsx)("div",{className:r,role:"dialog","aria-labelledby":"popover-title",children:(0,S.jsxs)("div",{className:c,children:[(0,S.jsxs)("header",{className:l,children:[(0,S.jsx)("h4",{className:d,id:"popover-title",children:"Menu"}),(0,S.jsx)("button",{type:"button",className:u,onClick:()=>n(!1),children:"Close"})]}),(0,S.jsx)("nav",{className:h,"aria-label":"Main",children:(0,S.jsxs)("ul",{className:x,children:[(0,S.jsx)("li",{children:(0,S.jsxs)("a",{className:p,href:"#0",children:[(0,S.jsx)("span",{children:"Home"}),(0,S.jsx)("span",{children:"35"})]})}),(0,S.jsx)("li",{children:(0,S.jsxs)("a",{className:p,href:"#0",children:[(0,S.jsx)("span",{children:"Trending"}),(0,S.jsx)("span",{children:"17"})]})}),(0,S.jsx)("li",{children:(0,S.jsxs)("a",{className:p,href:"#0",children:[(0,S.jsx)("span",{children:"Subscriptions"}),(0,S.jsx)("span",{children:"12"})]})}),(0,S.jsx)("li",{children:(0,S.jsxs)("a",{className:p,href:"#0",children:[(0,S.jsx)("span",{children:"Library"}),(0,S.jsx)("span",{children:"24"})]})}),(0,S.jsx)("li",{children:(0,S.jsxs)("a",{className:p,href:"#0",children:[(0,S.jsx)("span",{children:"History"}),(0,S.jsx)("span",{children:"18"})]})})]})}),(0,S.jsx)("footer",{className:m,children:(0,S.jsxs)("div",{className:j,children:[(0,S.jsx)("input",{className:f,type:"search",placeholder:"Search...","aria-label":"Search"}),(0,S.jsx)("button",{className:b,children:(0,S.jsx)("svg",{className:"icon",viewBox:"0 0 24 24",children:(0,S.jsxs)("g",{fill:"none",stroke:"currentColor",strokeLinecap:"square",strokeLinejoin:"miter",strokeMiterlimit:"10",strokeWidth:"2",children:[(0,S.jsx)("path",{d:"M22 22L15.656 15.656"}),(0,S.jsx)("circle",{cx:"10",cy:"10",r:"8"})]})})})]})})]})})})})]})};var L=n(9957),B=n(1488);const T=({disabled:e,children:t,onClick:n})=>{const o=(0,s.useRef)(null),[i,a,r,c]=(0,B.OC)(o,e);return(0,B.iQ)(o,a),(0,S.jsx)("button",{className:M,ref:o,onKeyDown:r,onClick:()=>{c(),(0,L._$)(n)},tabIndex:i,disabled:e,children:t})},W=()=>(0,S.jsxs)("div",{className:_,children:[(0,S.jsx)("button",{className:g,type:"button",children:"A Button"}),(0,S.jsx)(B.Wp,{direction:"vertical",children:(0,S.jsxs)("nav",{className:v,id:"sidenav","data-testid":"fdz-js-roving-tabindex-sidenav",children:[(0,S.jsx)("span",{className:k,children:"Menu"}),(0,S.jsxs)("ul",{className:y,children:[(0,S.jsx)("li",{children:(0,S.jsxs)(T,{disabled:!1,onClick:()=>console.log("Button One clicked"),children:[(0,S.jsxs)("div",{className:w,children:[(0,S.jsx)("svg",{className:C,viewBox:"0 0 16 16","aria-hidden":"true",children:(0,S.jsxs)("g",{fill:"none",strokeWidth:"1",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,S.jsx)("polyline",{points:"10.5,3.5 10.5,9.5 8,7.5 5.5,9.5 5.5,3.5"}),(0,S.jsx)("rect",{x:"0.5",y:"0.5",width:"15",height:"3"}),(0,S.jsx)("polyline",{points:"14.5,5.5 14.5,14.5 1.5,14.5 1.5,5.5"})]})}),(0,S.jsx)("span",{className:F,children:"Orders"})]}),(0,S.jsx)("span",{className:N,children:"10"})]})}),(0,S.jsx)("li",{children:(0,S.jsxs)(T,{disabled:!1,onClick:()=>console.log("Button Two clicked"),children:[(0,S.jsxs)("div",{className:w,children:[(0,S.jsx)("svg",{className:C,viewBox:"0 0 16 16","aria-hidden":"true",children:(0,S.jsx)("path",{fill:"none",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",d:"M14.328,2.672 c-1.562-1.562-4.095-1.562-5.657,0C8.391,2.952,8.18,3.27,8,3.601c-0.18-0.331-0.391-0.65-0.672-0.93 c-1.562-1.562-4.095-1.562-5.657,0c-1.562,1.562-1.562,4.095,0,5.657L8,14.5l6.328-6.172C15.891,6.766,15.891,4.234,14.328,2.672z"})}),(0,S.jsx)("span",{className:F,children:"Wishlist"})]}),(0,S.jsx)("span",{className:N,children:"12"})]})}),(0,S.jsx)("li",{children:(0,S.jsx)(T,{disabled:!1,onClick:()=>console.log("Button Three clicked"),children:(0,S.jsxs)("div",{className:w,children:[(0,S.jsx)("svg",{className:C,viewBox:"0 0 16 16","aria-hidden":"true",children:(0,S.jsxs)("g",{fill:"none",strokeWidth:"1",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,S.jsx)("polyline",{points:" 15.5,7.5 8,0.5 0.5,7.5"}),(0,S.jsx)("polyline",{points:"2.5,8.5 2.5,15.5 6.5,15.5 6.5,11.5 9.5,11.5 9.5,15.5 13.5,15.5 13.5,8.5"})]})}),(0,S.jsx)("span",{className:F,children:"Addresses"})]})})}),(0,S.jsx)("li",{children:(0,S.jsx)(T,{disabled:!1,onClick:()=>console.log("Button Four clicked"),children:(0,S.jsxs)("div",{className:w,children:[(0,S.jsx)("svg",{className:C,viewBox:"0 0 16 16","aria-hidden":"true",children:(0,S.jsxs)("g",{fill:"none",strokeWidth:"1",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,S.jsx)("line",{x1:"0.5",y1:"4.5",x2:"15.5",y2:"4.5"}),(0,S.jsx)("path",{d:"M5.5,12.5h-4 c-0.552,0-1-0.448-1-1v-10c0-0.552,0.448-1,1-1h13c0.552,0,1,0.448,1,1v5"}),(0,S.jsx)("polygon",{points:"11,15 8.5,15.5 9,13 13.5,8.5 15.5,10.5 "})]})}),(0,S.jsx)("span",{className:F,children:"Payment Methods"})]})})})]}),(0,S.jsx)("span",{className:k,children:"Other"}),(0,S.jsxs)("ul",{className:y,children:[(0,S.jsx)("li",{children:(0,S.jsx)(T,{disabled:!1,onClick:()=>console.log("Button Five clicked"),children:(0,S.jsxs)("div",{className:w,children:[(0,S.jsx)("svg",{className:C,viewBox:"0 0 16 16","aria-hidden":"true",children:(0,S.jsxs)("g",{fill:"none",strokeWidth:"1",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,S.jsx)("path",{d:"M4.318,9A5,5,0,0,0,1.5,13.5h0s2,2,6.5,2,6.5-2,6.5-2h0A5,5,0,0,0,11.681,9"}),(0,S.jsx)("path",{d:"M11.5,4c0,1.933-1.567,4.5-3.5,4.5S4.5,5.933,4.5,4a3.5,3.5,0,0,1,7,0Z"})]})}),(0,S.jsx)("span",{className:F,children:"Profile Settings"})]})})}),(0,S.jsx)("li",{children:(0,S.jsx)(T,{disabled:!1,onClick:()=>console.log("Button Six clicked"),children:(0,S.jsxs)("div",{className:w,children:[(0,S.jsx)("svg",{className:C,viewBox:"0 0 16 16","aria-hidden":"true",children:(0,S.jsxs)("g",{fill:"none",strokeWidth:"1",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,S.jsx)("path",{d:"M6.5,5.5v-3 c0-0.552,0.448-1,1-1h7c0.552,0,1,0.448,1,1v12c0,0.552-0.448,1-1,1h-7c-0.552,0-1-0.448-1-1v-3"}),(0,S.jsx)("line",{x1:"11.5",y1:"8.5",x2:"0.5",y2:"8.5"}),(0,S.jsx)("polyline",{points:"3.5,5.5 0.5,8.5 3.5,11.5"})]})}),(0,S.jsx)("span",{className:F,children:"Log Out"})]})})})]})]})}),(0,S.jsx)("button",{className:g,type:"button",children:"Another Button"})]})}}]);